{"version":3,"sources":["../../../../src/models/schemas/UserSchema.js"],"names":["UserSchema","Schema","name","type","String","unique","required","trim","password","isAdmin","Boolean","default","pre","next","user","hash","err","User","model"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAMA,aAAa,IAAI,mBAASC,MAAb,CAAoB;AACnCC,UAAM;AACFC,cAAMC,MADJ;AAEFC,gBAAQ,IAFN;AAGFC,kBAAU,IAHR;AAIFC,cAAM;AAJJ,KAD6B;AAOnCC,cAAU;AACNL,cAAMC,MADA;AAENE,kBAAU;AAFJ,KAPyB;AAWnCG,aAAU;AACNN,cAAMO,OADA;AAENC,iBAAS,KAFH;AAGNL,kBAAU;AAHJ;AAXyB,CAApB,CAAnB;;AAkBA;AACAN,WAAWY,GAAX,CAAe,MAAf,EAAuB,UAASC,IAAT,EAAe;AAClC,QAAIC,OAAO,IAAX;;AAEA,qBAAOC,IAAP,CAAY,KAAKP,QAAjB,EAA2B,EAA3B,EAA+B,UAACQ,GAAD,EAAMD,IAAN,EAAe;AAC1C,YAAIC,GAAJ,EAAS;AACL,mBAAOH,KAAKG,GAAL,CAAP;AACH;AACDF,aAAKN,QAAL,GAAgBO,IAAhB;AACAF;AACH,KAND;AAOH,CAVD;;AAYA,IAAMI,OAAO,mBAASC,KAAT,CAAe,MAAf,EAAuBlB,UAAvB,CAAb;kBACeiB,I","file":"UserSchema.js","sourcesContent":["import mongoose from 'mongoose';\r\nimport bcrypt from 'bcrypt';\r\n\r\nconst UserSchema = new mongoose.Schema({\r\n    name: {\r\n        type: String,\r\n        unique: true,\r\n        required: true,\r\n        trim: true\r\n    },\r\n    password: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    isAdmin:  {\r\n        type: Boolean,\r\n        default: false,\r\n        required: true\r\n    }\r\n});\r\n\r\n// hashowanie hasÅ‚a\r\nUserSchema.pre('save', function(next) {\r\n    let user = this;\r\n\r\n    bcrypt.hash(this.password, 10, (err, hash) => {\r\n        if (err) {\r\n            return next(err);\r\n        }\r\n        user.password = hash;\r\n        next();\r\n    })\r\n});\r\n\r\nconst User = mongoose.model('User', UserSchema);\r\nexport default User;"]}