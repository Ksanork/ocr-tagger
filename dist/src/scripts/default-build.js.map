{"version":3,"sources":["../../../src/scripts/default-build.js"],"names":["dbo","mongo_url","removeAll","addUser","deleteFolderRecursive","mkdirSync","addNewProblem","path","existsSync","readdirSync","forEach","file","index","curPath","console","log","lstatSync","isDirectory","unlinkSync","rmdirSync"],"mappings":";;AAAA;;;;AAEA;;;;AACA;;;;;;AAEA,IAAIA,MAAM,kBAAQ,iBAAOC,SAAf,CAAV;;AAEAD,IAAIE,SAAJ,CAAc,YAAM;AAChBF,QAAIG,OAAJ,CAAY,OAAZ,EAAqB,OAArB,EAA8B,IAA9B,EAAoC,YAAM,CAAE,CAA5C;;AAEAC,0BAAsB,yBAAtB;AACA,iBAAGC,SAAH,CAAa,0BAAb;;AAEAL,QAAIM,aAAJ,CAAkB,0BAAlB,EAA8C,6BAA9C,EAA6E,YAAM,CAAE,CAArF;AACAN,QAAIM,aAAJ,CAAkB,wBAAlB,EAA4C,2BAA5C,EAAyE,YAAM,CAAE,CAAjF;AACAN,QAAIM,aAAJ,CAAkB,4BAAlB,EAAgD,2BAAhD,EAA6E,YAAM,CAAE,CAArF;AACH,CATD;;AAWA,SAASF,qBAAT,CAA+BG,IAA/B,EAAqC;AACjC,QAAI,aAAGC,UAAH,CAAcD,IAAd,CAAJ,EAAyB;AACrB,qBAAGE,WAAH,CAAeF,IAAf,EAAqBG,OAArB,CAA6B,UAASC,IAAT,EAAeC,KAAf,EAAqB;AAC9C,gBAAIC,UAAUN,OAAO,GAAP,GAAaI,IAA3B;;AAEAG,oBAAQC,GAAR,CAAYF,OAAZ;AACA,gBAAI,aAAGG,SAAH,CAAaH,OAAb,EAAsBI,WAAtB,EAAJ,EAAyC;AAAE;AACvCb,sCAAsBS,OAAtB;AACH,aAFD,MAEO;AAAE;AACL,6BAAGK,UAAH,CAAcL,OAAd;AACH;AACJ,SATD;AAUA,qBAAGM,SAAH,CAAaZ,IAAb;AACH;AACJ","file":"default-build.js","sourcesContent":["import fs from 'fs';\r\n\r\nimport DBO from '../models/DBO'\r\nimport config from '../config'\r\n\r\nlet dbo = new DBO(config.mongo_url);\r\n\r\ndbo.removeAll(() => {\r\n    dbo.addUser(\"admin\", \"admin\", true, () => {});\r\n\r\n    deleteFolderRecursive(\"../../../dataset-images\");\r\n    fs.mkdirSync(\"../../..//dataset-images\");\r\n\r\n    dbo.addNewProblem(\"Obraz jest źle przycięty\", \"Zgłoś źle przycięte zdjęcie\", () => {});\r\n    dbo.addNewProblem(\"Obraz jest nieczytelny\", \"Zgłoś nieczytelne zdjęcie\", () => {});\r\n    dbo.addNewProblem(\"Obraz nie pasuje do zbioru\", \"Zgłoś niepasujące zdjęcie\", () => {});\r\n});\r\n\r\nfunction deleteFolderRecursive(path) {\r\n    if (fs.existsSync(path)) {\r\n        fs.readdirSync(path).forEach(function(file, index){\r\n            var curPath = path + \"/\" + file;\r\n\r\n            console.log(curPath);\r\n            if (fs.lstatSync(curPath).isDirectory()) { // recurse\r\n                deleteFolderRecursive(curPath);\r\n            } else { // delete file\r\n                fs.unlinkSync(curPath);\r\n            }\r\n        });\r\n        fs.rmdirSync(path);\r\n    }\r\n};"]}